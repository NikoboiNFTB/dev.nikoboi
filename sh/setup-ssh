#!/usr/bin/env bash
set -e

read -rp "Install directory (leave blank to use current directory): " install_dir

# Expand ~ if present
install_dir="${install_dir/#\~/$HOME}"

# Default to current directory if empty
if [ -z "$install_dir" ]; then
    install_dir="$PWD"
    echo "Using current directory: $install_dir"
fi

# Create directory if missing
if [ ! -d "$install_dir" ]; then
    echo "Directory doesnâ€™t exist. Making it for you."
    mkdir -p "$install_dir"
fi

cd "$install_dir"

echo "Downloading files..."

wget -q https://raw.githubusercontent.com/NikoboiNFTB/GitHub-Tools/refs/heads/main/shell/disable-ssh
chmod +x disable-ssh

wget -q https://raw.githubusercontent.com/NikoboiNFTB/GitHub-Tools/refs/heads/main/shell/enable-ssh
chmod +x enable-ssh

echo "Files downloaded"

# Prompt for copying to home directory
read -rp "Copy the scripts to ~/ for quick access anywhere? [y/N]: " choice

case "$choice" in
    [yY])
        echo "Copying to home directory..."
        cp -f disable-ssh enable-ssh "$HOME/"
        ;;
    *)
        echo "Skipping copy to home directory."
        ;;
esac

# Prompt to hide files
read -rp "Hide files? [y/N]: " hide_choice

case "$hide_choice" in
    [yY])
        echo "Hiding files..."
        for f in disable-ssh enable-ssh; do
            [ -e "$f" ] && mv "$f" ".$f"
        done
        ;;
    *)
        echo "Leaving files visible."
        ;;
esac

echo "All done!"
